<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Access and Analyze Global Greenspace Sptatial Data ‚Ä¢ greenSD</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Access and Analyze Global Greenspace Sptatial Data">
<meta name="description" content="greenSD provides tools to access and analyze multi-band greenspace seasonality data cubes (available for 1,028 major global cities), global NDVI/land cover data from the ESA WorldCover 10m Dataset, and Sentinel-2-l2a images. Users can download data using bounding boxes, city names, and filter by year or seasonal time window. The package also supports calculating human exposure to greenspace using a population-weighted greenspace exposure model based on GHSL population data, and calculating a set of greenspace morphology metrics at patch and landscape levels.">
<meta property="og:description" content="greenSD provides tools to access and analyze multi-band greenspace seasonality data cubes (available for 1,028 major global cities), global NDVI/land cover data from the ESA WorldCover 10m Dataset, and Sentinel-2-l2a images. Users can download data using bounding boxes, city names, and filter by year or seasonal time window. The package also supports calculating human exposure to greenspace using a population-weighted greenspace exposure model based on GHSL population data, and calculating a set of greenspace morphology metrics at patch and landscape levels.">
<meta property="og:image" content="https://billbillbilly.github.io/greenSD/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">greenSD</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/data_analysis.html">data_analysis</a></li>
    <li><a class="dropdown-item" href="articles/get_data.html">get_data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/billbillbilly/greenSD/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="greensd-">greenSD 
<a class="anchor" aria-label="anchor" href="#greensd-"></a>
</h1>
</div>
<!-- badges: start -->

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>greenSD provides tools to access and analyze multi-band greenspace seasonality data cubes (available for 1,028 major global cities) and global land cover/NDVI data from the ESA WorldCover 10m Dataset. Users can download data using bounding boxes, city names, or coordinates, extract values at specific points, and filter by year or seasonal time window. Moreover, the package. The package also supports calculating human exposure to greenspace using a population-weighted greenspace exposure model based on Global Human Settlement Layer (GHSL) population data and computing a set of greenspace morphology metrics at patch or landscape levels.</p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p>üåç Access global greenspace datasets by bounding box, city name, or geographic coordinates - Seasonal greenspace data cubes for 1028 major global cities - 10m NDVI composite data from ESA WorldCover</p>
<p>üõ∞Ô∏è Remote sensing‚Äìbased greenspace extraction - Automatically download and process high-resolution images from WorldImagery or Sentinel-2 cloudless tiles (EOX) - Extract greenery from map tiles - Retrieve Sentinel-2 L2A imagery and compute NDVI or extract raw bands</p>
<p>üß† Multi-source land cover classification - Combine semantic segmentation and remote sensing tiles for land cover classification</p>
<p>üßÆ Greenspace metrics calculation - Estimate population-weighted greenspace fraction (PWGF) - Calculate population-weighted greenspace exposure (PWGE) - Calculate morphological greenscape metrics (e.g., area, perimeter, shape, core area, contiguity)</p>
<p>üìä Visualization - Export multi-layer data as animated GIFs</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the development version:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install devtools if needed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"billbillbilly/greenSD"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level4">
<h4 id="id_1-get-data-from-greenspace-seasonality-data-cube">1 Get data from Greenspace Seasonality Data Cube<a class="anchor" aria-label="anchor" href="#id_1-get-data-from-greenspace-seasonality-data-cube"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># by bounding box</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>gs <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">get_gsdc</span>(<span class="at">place =</span> <span class="st">'Detroit'</span>, <span class="at">year =</span> <span class="dv">2022</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># by place name</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>gs <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">get_gsdc</span>(<span class="at">location =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">83.10215</span> <span class="fl">42.38342</span>), <span class="at">year =</span> <span class="dv">2022</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># by coordinates (point)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>gs <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">get_gsdc</span>(<span class="at">location =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">83.10215</span> <span class="fl">42.38342</span>), <span class="at">year =</span> <span class="dv">2022</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># by UID and time range</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="do">## greenSD::check_available_cities()</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>gs <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">get_gsdc</span>(<span class="at">UID =</span> <span class="dv">1825</span>, <span class="at">year =</span> <span class="dv">2022</span>, <span class="at">time =</span> <span class="fu">c</span>(<span class="st">"03-01"</span>, <span class="st">"09-01"</span>))</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co"># Extract values with sampled locations</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>boundary <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">check_urban_boundary</span>(<span class="at">uid =</span> <span class="dv">1825</span>, <span class="at">plot =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>samples <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_sample</span>(boundary, <span class="at">size =</span> <span class="dv">50</span>)</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>gs_samples <span class="ot">&lt;-</span> greenSD<span class="sc">::</span><span class="fu">sample_values</span>(samples, <span class="at">year =</span> <span class="dv">2022</span>)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_2-get-data-from-esa-worldcover-10m-annual-dataset">2 Get data from ESA WorldCover 10m Annual Dataset<a class="anchor" aria-label="anchor" href="#id_2-get-data-from-esa-worldcover-10m-annual-dataset"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83.087174</span>,<span class="fl">42.333373</span>,<span class="op">-</span><span class="fl">83.042542</span>,<span class="fl">42.358748</span><span class="op">)</span></span>
<span><span class="va">ndvi</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_esa_wc.html">get_esa_wc</a></span><span class="op">(</span><span class="va">bbox</span>, datatype <span class="op">=</span> <span class="st">'ndvi'</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="va">lc</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_esa_wc.html">get_esa_wc</a></span><span class="op">(</span><span class="va">bbox</span>, datatype <span class="op">=</span> <span class="st">'landcover'</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>ESA WorldCover NDVI</th>
<th>ESA WorldCover Land Cover</th>
</tr></thead>
<tbody><tr class="odd">
<td><img src="reference/figures/NDVI_p50.png"></td>
<td><img src="reference/figures/lc.png"></td>
</tr></tbody>
</table>
</div>
<div class="section level4">
<h4 id="id_3-retrieve-sentinel-2-l2a-images-and-compute-ndvi">3 Retrieve Sentinel-2-l2a images and compute NDVI<a class="anchor" aria-label="anchor" href="#id_3-retrieve-sentinel-2-l2a-images-and-compute-ndvi"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ndvi</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_s2a_ndvi.html">get_s2a_ndvi</a></span><span class="op">(</span>place <span class="op">=</span> <span class="st">'New York'</span>, </span>
<span>                              datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-08-01"</span>, <span class="st">"2020-09-01"</span><span class="op">)</span>, </span>
<span>                              output_bands <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">all_bands</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_s2a_ndvi.html">get_s2a_ndvi</a></span><span class="op">(</span>place <span class="op">=</span> <span class="st">'New York'</span>, </span>
<span>                                   datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-08-01"</span>, <span class="st">"2020-09-01"</span><span class="op">)</span>, </span>
<span>                                   output_bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'B01'</span>, <span class="st">'B02'</span>, <span class="st">'B03'</span>, </span>
<span>                                                    <span class="st">'B04'</span>, <span class="st">'B05'</span>, <span class="st">'B06'</span>, </span>
<span>                                                    <span class="st">'B07'</span>, <span class="st">'B08'</span>, <span class="st">'B09'</span>, </span>
<span>                                                    <span class="st">'B11'</span>, <span class="st">'B12'</span><span class="op">)</span></span>
<span>                                  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_4-get-map-tiles-and-extract-greenspace-from-worldimagery-or-sentinel-2-cloudless-mosaic-tiles">4 Get map tiles and extract greenspace from WorldImagery or Sentinel-2 cloudless mosaic tiles<a class="anchor" aria-label="anchor" href="#id_4-get-map-tiles-and-extract-greenspace-from-worldimagery-or-sentinel-2-cloudless-mosaic-tiles"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">greenspace</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_tile_green.html">get_tile_green</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83.087174</span>,<span class="fl">42.333373</span>,<span class="op">-</span><span class="fl">83.042542</span>,<span class="fl">42.358748</span><span class="op">)</span>, </span>
<span>                                      zoom <span class="op">=</span> <span class="fl">16</span>, </span>
<span>                                      provider <span class="op">=</span> <span class="st">"esri"</span><span class="op">)</span></span>
<span><span class="co"># Sentinel-2 cloudless mosaic tiles</span></span>
<span><span class="va">greenspace</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_tile_green.html">get_tile_green</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83.087174</span>,<span class="fl">42.333373</span>,<span class="op">-</span><span class="fl">83.042542</span>,<span class="fl">42.358748</span><span class="op">)</span>, </span>
<span>                                      zoom <span class="op">=</span> <span class="fl">17</span>, </span>
<span>                                      provider <span class="op">=</span> <span class="st">"eox"</span>,</span>
<span>                                      year <span class="op">=</span> <span class="fl">2024</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>WorldImagery map</th>
<th>Greenspace</th>
</tr></thead>
<tbody><tr class="odd">
<td><img src="reference/figures/esri_tiles.png"></td>
<td><img src="reference/figures/esri_green.png"></td>
</tr></tbody>
</table>
<table class="table">
<thead><tr class="header">
<th>Sentinel-2 cloudless mosaic map</th>
<th>Greenspace</th>
</tr></thead>
<tbody><tr class="odd">
<td><img src="reference/figures/eox_tiles.png"></td>
<td><img src="reference/figures/eox_green.png"></td>
</tr></tbody>
</table>
</div>
<div class="section level4">
<h4 id="id_5-classify-land-cover-based-on-multi-source-imagery-datasets">5 Classify land cover based on multi-source imagery datasets<a class="anchor" aria-label="anchor" href="#id_5-classify-land-cover-based-on-multi-source-imagery-datasets"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/lc_sem_seg.html">lc_sem_seg</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83.087174</span>,<span class="fl">42.333373</span>,<span class="op">-</span><span class="fl">83.042542</span>,<span class="fl">42.358748</span><span class="op">)</span>,</span>
<span>                           tiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'esri'</span>, <span class="st">'eox'</span><span class="op">)</span>,</span>
<span>                           label_year <span class="op">=</span> <span class="fl">2021</span>,</span>
<span>                           tile_year <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>                           sample_size <span class="op">=</span> <span class="fl">20000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_6-compute-population-weighted-greenspace-fraction-and-exposure-to-greenspace">6 Compute population-weighted greenspace fraction and exposure to greenspace<a class="anchor" aria-label="anchor" href="#id_6-compute-population-weighted-greenspace-fraction-and-exposure-to-greenspace"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load example data (or use `gs` from previous step)</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"detroit_gs.tif"</span>, package <span class="op">=</span> <span class="st">"greenSD"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># population-weighted greenspace fraction</span></span>
<span><span class="va">pwgf</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu">pop_weg</span><span class="op">(</span></span>
<span>      r <span class="op">=</span> <span class="va">sample_data</span>,</span>
<span>      pop_year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>      radius <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># population-weighted greenspace exposure</span></span>
<span><span class="va">pwge</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu">pop_weg</span><span class="op">(</span></span>
<span>      r <span class="op">=</span> <span class="va">sample_data</span>,</span>
<span>      pop_year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>      radius <span class="op">=</span> <span class="fl">500</span>, </span>
<span>      grid_size <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></code></pre></div>
<p>Computational process of population-weighted greenspace fraction and exposure</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="37%">
<col width="36%">
</colgroup>
<thead><tr class="header">
<th><span style="font-size:10px;">1. GHSL population</span></th>
<th><span style="font-size:10px;">2. Extract population by points</span></th>
<th><span style="font-size:10px;">3. buffers based on points</span></th>
</tr></thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="34%">
<col width="29%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th><span style="font-size:10px;">4. Population-Weighted Greenspace Fraction</span></th>
<th><span style="font-size:10px;">5. Summarize values with grid</span></th>
<th><span style="font-size:10px;">6. Population-Weighted Greenspace Exposure</span></th>
</tr></thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="id_7-compute-morphology-metrics-of-greenspace">7 Compute morphology metrics of greenspace<a class="anchor" aria-label="anchor" href="#id_7-compute-morphology-metrics-of-greenspace"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">green</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/get_tile_green.html">get_tile_green</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83.087174</span>,<span class="fl">42.333373</span>,<span class="op">-</span><span class="fl">83.042542</span>,<span class="fl">42.358748</span><span class="op">)</span>, </span>
<span>                                 provider <span class="op">=</span> <span class="st">"esri"</span>, </span>
<span>                                 zoom <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/ifelse.html" class="external-link">ifel</a></span><span class="op">(</span><span class="va">green</span><span class="op">$</span><span class="va">green</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">m_patch</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/compute_morphology.html">compute_morphology</a></span><span class="op">(</span>r <span class="op">=</span> <span class="va">p</span>, directions <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m_grid</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/compute_morphology.html">compute_morphology</a></span><span class="op">(</span>r <span class="op">=</span> <span class="va">p</span>, directions <span class="op">=</span> <span class="fl">4</span>, grid_size <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_8-visualization">8 Visualization<a class="anchor" aria-label="anchor" href="#id_8-visualization"></a>
</h4>
<p>The <code><a href="reference/to_gif.html">to_gif()</a></code> function converts a multi-band raster to into an animated GIF</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gif</span> <span class="op">&lt;-</span> <span class="fu">greenSD</span><span class="fu">::</span><span class="fu"><a href="reference/to_gif.html">to_gif</a></span><span class="op">(</span></span>
<span>  r <span class="op">=</span> <span class="va">sample_data</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">600</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">600</span>,</span>
<span>  axes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  title_prefix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"greenspace - Day"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sample_data</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display in RStudio Viewer or save</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gif</span><span class="op">)</span></span>
<span><span class="co"># To save the GIF manually:</span></span>
<span><span class="fu">magick</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_write</a></span><span class="op">(</span><span class="va">gif</span>, <span class="st">"greenspace_animation.gif"</span><span class="op">)</span></span></code></pre></div>
<p>Example in the Detroit area:</p>
<table class="table">
<colgroup>
<col width="26%">
<col width="36%">
<col width="36%">
</colgroup>
<thead><tr class="header">
<th>Seasonal Greenspace Dynamics</th>
<th>Population-Weighted Greenspace Fraction</th>
<th>Population-Weighted Greenspace Exposure</th>
</tr></thead>
<tbody><tr class="odd">
<td><img src="reference/figures/greenspace_animation.gif"></td>
<td><img src="reference/figures/greenspace_fraction_animation.gif"></td>
<td><img src="reference/figures/greenspace_exposure_animation.gif"></td>
</tr></tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<p>Some datasets may require proper citation when used.</p>
</div>
<div class="section level2">
<h2 id="issues-and-bugs">Issues and bugs<a class="anchor" aria-label="anchor" href="#issues-and-bugs"></a>
</h2>
<p>If you discover a bug not associated with connection to the API that is not already a <a href="https://github.com/billbillbilly/greenSD/issues" class="external-link">reported issue</a>, please <a href="https://github.com/billbillbilly/greenSD/issues/new" class="external-link">open a new issue</a> providing a reproducible example.</p>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<p>Wu, S., Song, Y., An, J. et al.¬†High-resolution greenspace dynamic data cube from Sentinel-2 satellites over 1028 global major cities. Sci Data 11, 909 (2024). <a href="https://doi.org/10.1038/s41597-024-03746-7" class="external-link uri">https://doi.org/10.1038/s41597-024-03746-7</a></p>
<p>Chen, B., Wu, S., Song, Y. et al.¬†Contrasting inequality in human exposure to greenspace between cities of Global North and Global South. Nat Commun 13, 4636 (2022). <a href="https://doi.org/10.1038/s41467-022-32258-4" class="external-link uri">https://doi.org/10.1038/s41467-022-32258-4</a></p>
<p>Pesaresi, M., Schiavina, M., Politis, P., Freire, S., Krasnodƒôbska, K., Uhl, J. H., ‚Ä¶ Kemper, T. (2024). Advances on the Global Human Settlement Layer by joint assessment of Earth Observation and population survey data. International Journal of Digital Earth, 17(1). <a href="https://doi.org/10.1080/17538947.2024.2390454" class="external-link uri">https://doi.org/10.1080/17538947.2024.2390454</a></p>
<p>Zanaga, D., Van De Kerchove, R., De Keersmaecker, W., Souverijns, N., Brockmann, C., Quast, R., Wevers, J., Grosu, A., Paccini, A., Vergnaud, S., Cartus, O., Santoro, M., Fritz, S., Georgieva, I., Lesiv, M., Carter, S., Herold, M., Li, L., Tsendbazar, N.-E., ‚Ä¶ Arino, O. (2021). ESA WorldCover 10 m 2020 v100 (Version v100) [Data set]. Zenodo. <a href="https://doi.org/10.5281/zenodo.5571936" class="external-link uri">https://doi.org/10.5281/zenodo.5571936</a></p>
<p>Zanaga, D., Van De Kerchove, R., Daems, D., De Keersmaecker, W., Brockmann, C., Kirches, G., Wevers, J., Cartus, O., Santoro, M., Fritz, S., Lesiv, M., Herold, M., Tsendbazar, N.-E., Xu, P., Ramoino, F., &amp; Arino, O. (2022). ESA WorldCover 10 m 2021 v200 (Version v200) [Data set]. Zenodo. <a href="https://doi.org/10.5281/zenodo.7254221" class="external-link uri">https://doi.org/10.5281/zenodo.7254221</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/billbillbilly/greenSD/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/billbillbilly/greenSD/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing greenSD</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Xiaohao Yang <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/billbillbilly/greenSD/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/billbillbilly/greenSD/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Xiaohao Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
